{"remainingRequest":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Karolis\\Desktop\\infomovies\\src\\components\\Comments.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\src\\components\\Comments.vue","mtime":1638825870698},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638703127529},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\babel-loader\\lib\\index.js","mtime":1638703128703},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638703127529},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1638703128876},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\babel.config.js","mtime":1638703136159},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638703127529},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\babel-loader\\lib\\index.js","mtime":1638703128703},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638703127529},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1638703128876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcS2Fyb2xpc1xcRGVza3RvcFxcaW5mb21vdmllc1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlci52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NvbW1lbnRzJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJycsCiAgICAgIG1vdmllOiAnJywKICAgICAgY29tbWVudHM6IFtdLAogICAgICB0b2tlbjogJycKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXI6IEhlYWRlcgogIH0sCiAgbWV0aG9kczogewogICAgc2hvd0lmVXNlcjogZnVuY3Rpb24gc2hvd0lmVXNlcigpIHsKICAgICAgdmFyIHJvbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlclJvbGUiKTsKCiAgICAgIGlmIChyb2xlID09ICJTaW1wbGVVc2VyIiB8fCByb2xlID09ICJBZG1pbiIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHNob3dJZkFkbWluOiBmdW5jdGlvbiBzaG93SWZBZG1pbigpIHsKICAgICAgdmFyIHJvbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlclJvbGUiKTsKCiAgICAgIGlmIChyb2xlID09ICJBZG1pbiIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGNyZWF0ZUNvbW1lbnQ6IGZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnQ3JlYXRlQ29tbWVudCcKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlQ29tbWVudDogZnVuY3Rpb24gdXBkYXRlQ29tbWVudChpZCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY2hvc2VuQ29tbWVudCIsIGlkKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdVcGRhdGVDb21tZW50JwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVDb21tZW50OiBmdW5jdGlvbiBkZWxldGVDb21tZW50KGlkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjaG9zZW5Db21wYW55LCBjb21wYW55SWQsIGNob3Nlbk1vdmllLCBtb3ZpZUlkOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNob3NlbkNvbXBhbnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY2hvc2VuQ29tcGFueSIpOwogICAgICAgICAgICAgICAgY29tcGFueUlkID0gSlNPTi5wYXJzZShjaG9zZW5Db21wYW55KS5pZDsKICAgICAgICAgICAgICAgIGNob3Nlbk1vdmllID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNob3Nlbk1vdmllIik7CiAgICAgICAgICAgICAgICBtb3ZpZUlkID0gSlNPTi5wYXJzZShjaG9zZW5Nb3ZpZSkuaWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5kZWxldGUoImh0dHBzOi8vaW5mb21vdmllc2FwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvY29tcGFuaWVzLyIgKyBjb21wYW55SWQgKyAiL21vdmllcy8iICsgbW92aWVJZCArICIvY29tbWVudHMvIiArIGlkLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIi5jb25jYXQoX3RoaXMudG9rZW4pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgY2hvc2VuQ29tcGFueSwgY29tcGFueUlkLCBjaG9zZW5Nb3ZpZSwgbW92aWVJZCwgcmVxdWVzdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczIudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgICAgICAgICAgICBjaG9zZW5Db21wYW55ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNob3NlbkNvbXBhbnkiKTsKICAgICAgICAgICAgICBjb21wYW55SWQgPSBKU09OLnBhcnNlKGNob3NlbkNvbXBhbnkpLmlkOwogICAgICAgICAgICAgIGNob3Nlbk1vdmllID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNob3Nlbk1vdmllIik7CiAgICAgICAgICAgICAgbW92aWVJZCA9IEpTT04ucGFyc2UoY2hvc2VuTW92aWUpLmlkOwogICAgICAgICAgICAgIF90aGlzMi5tb3ZpZSA9IEpTT04ucGFyc2UoY2hvc2VuTW92aWUpLnRpdGxlOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL2luZm9tb3ZpZXNhcGkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL2NvbXBhbmllcy8iICsgY29tcGFueUlkICsgIi9tb3ZpZXMvIiArIG1vdmllSWQgKyAiL2NvbW1lbnRzLyIpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHJlcXVlc3QgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfdGhpczIuY29tbWVudHMgPSByZXF1ZXN0LmRhdGE7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\Karolis\\Desktop\\infomovies\\src\\components\\Comments.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<Header />\r\n    <h1>Filmo {{this.movie}} komentarų sąrašas</h1>\r\n    <button v-if=\"showIfUser()\" v-on:click=\"createComment()\">Sukurkite komentarą</button>\r\n    <br>\r\n    <br>\r\n    <button @click=\"$router.push('Movies')\">Grįžti į filmų sąrašą</button>\r\n    <br>\r\n    <br>\r\n    <table>\r\n        <td>Tekstas</td>\r\n        <td v-if=\"showIfAdmin()\"></td>\r\n        <td v-if=\"showIfAdmin()\"></td>\r\n        <tr v-for=\"comment in comments\" :key=\"comment.id\">\r\n            <td>{{comment.text}}</td>\r\n            <td v-if=\"showIfAdmin()\" v-on:click=\"updateComment(comment.id)\">Atnaujinti</td>\r\n            <td v-if=\"showIfAdmin()\" v-on:click=\"deleteComment(comment.id)\">Ištrinti</td>\r\n        </tr>   \r\n    </table>\r\n</template>\r\n<script>\r\n\r\nimport axios from 'axios'\r\nimport Header from './Header.vue'\r\nexport default{\r\n    name:'Comments',\r\n    data(){\r\n        return {\r\n            name:'',\r\n            movie:'',\r\n            comments:[],\r\n            token:''\r\n        }\r\n    },\r\n    components:{\r\n        Header\r\n    },\r\n    methods:{\r\n        showIfUser(){\r\n            let role = localStorage.getItem(\"userRole\");\r\n            if(role == \"SimpleUser\" || role == \"Admin\"){\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        showIfAdmin(){\r\n            let role = localStorage.getItem(\"userRole\");\r\n            if(role == \"Admin\"){\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        createComment(){\r\n            this.$router.push({name: 'CreateComment'});\r\n        },\r\n        updateComment(id){\r\n            localStorage.setItem(\"chosenComment\", id);\r\n            this.$router.push({name: 'UpdateComment'});\r\n        },\r\n        async deleteComment(id){\r\n            let chosenCompany = localStorage.getItem(\"chosenCompany\");\r\n            let companyId = JSON.parse(chosenCompany).id;\r\n            let chosenMovie = localStorage.getItem(\"chosenMovie\");\r\n            let movieId = JSON.parse(chosenMovie).id;\r\n            await axios.delete(\"https://infomoviesapi.azurewebsites.net/api/companies/\" + companyId + \"/movies/\" + movieId + \"/comments/\" + id, { headers: {\"Authorization\" : `Bearer ${this.token}`} });\r\n            location.reload();\r\n        }\r\n    },\r\n\r\n    async mounted(){\r\n        this.token = localStorage.getItem(\"token\");\r\n        let chosenCompany = localStorage.getItem(\"chosenCompany\");\r\n        let companyId = JSON.parse(chosenCompany).id;\r\n        let chosenMovie = localStorage.getItem(\"chosenMovie\");\r\n        let movieId = JSON.parse(chosenMovie).id;\r\n        this.movie = JSON.parse(chosenMovie).title;\r\n        let request =await axios.get(\"https://infomoviesapi.azurewebsites.net/api/companies/\" + companyId + \"/movies/\" + movieId + \"/comments/\");\r\n        this.comments=request.data;\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\ntable {\r\n  border-collapse: collapse;\r\n  width: 100%;\r\n}\r\n\r\nth, td {\r\n  padding: 8px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #DDD;\r\n  border-color: #96D4D4;\r\n  border: 1px solid black;\r\n}\r\n\r\ntr:hover {background-color: #D6EEEE;}\r\n</style>\r\n\r\n"],"sourceRoot":""}]}