{"remainingRequest":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Karolis\\Desktop\\infomovies\\src\\components\\Companies.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\src\\components\\Companies.vue","mtime":1638776498524},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\babel.config.js","mtime":1638703136159},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638703127529},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\babel-loader\\lib\\index.js","mtime":1638703128703},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638703127529},{"path":"C:\\Users\\Karolis\\Desktop\\infomovies\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1638703128876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcS2Fyb2xpc1xcRGVza3RvcFxcaW5mb21vdmllc1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBqd3RfZGVjb2RlIGZyb20gImp3dC1kZWNvZGUiOwppbXBvcnQgSGVhZGVyIGZyb20gJy4vSGVhZGVyLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29tcGFuaWVzJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJycsCiAgICAgIHJlc3RhdXJhbnQ6IFtdLAogICAgICBhY2Nlc3NUb2tlbjogJycKICAgIH07CiAgfSwKICB0b2tlbkRhdGE6IGZ1bmN0aW9uIHRva2VuRGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvbGU6ICcnCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgSGVhZGVyOiBIZWFkZXIKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVJlc3RvcmF1bnQ6IGZ1bmN0aW9uIGNyZWF0ZVJlc3RvcmF1bnQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnQWRkUmVzdG9yYXVudCcKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlUmVzdG9yYXVudDogZnVuY3Rpb24gdXBkYXRlUmVzdG9yYXVudChpZCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicGlja2VkUmVzdG9yYW50IiwgaWQpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ1VwZGF0ZVJlc3RvcmF1bnQnCiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVJlc3RvcmF1bnQ6IGZ1bmN0aW9uIGRlbGV0ZVJlc3RvcmF1bnQoaWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdG9rZW5KU09OLCB0b2tlbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0b2tlbkpTT04gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlci13aXRoLWp3dC10b2tlbiIpOwogICAgICAgICAgICAgICAgdG9rZW4gPSBKU09OLnBhcnNlKHRva2VuSlNPTikuYWNjZXNzVG9rZW47CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5kZWxldGUoImh0dHBzOi8vaW5mb21vdmllc2FwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvcmVzdG9yYXVudHMvIiArIGlkLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHBpY2tSZXN0b3JhdW50OiBmdW5jdGlvbiBwaWNrUmVzdG9yYXVudChpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHRva2VuSlNPTiwgdG9rZW4sIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlci13aXRoLWp3dC10b2tlbiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdG9rZW5KU09OID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXItd2l0aC1qd3QtdG9rZW4iKTsKICAgICAgICAgICAgICAgIHRva2VuID0gSlNPTi5wYXJzZSh0b2tlbkpTT04pLmFjY2Vzc1Rva2VuOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgiaHR0cHM6Ly9pbmZvbW92aWVzYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9yZXN0b3JhdW50cy8iICsgaWQsIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogIkJlYXJlciAiLmNvbmNhdCh0b2tlbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInBpY2tlZFJlc3RvcmFudCIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5kYXRhKSk7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ1Jlc3RvcmF1bnQnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaXNBZG1pbjogZnVuY3Rpb24gaXNBZG1pbigpIHsKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyLXdpdGgtand0LXRva2VuIikgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIHRva2VuSlNPTiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyLXdpdGgtand0LXRva2VuIik7CiAgICAgIHZhciB0b2tlbiA9IEpTT04ucGFyc2UodG9rZW5KU09OKS5hY2Nlc3NUb2tlbjsKICAgICAgdmFyIGRlY29kZWQgPSBqd3RfZGVjb2RlKHRva2VuKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIkRlY29kZWQiLCBKU09OLnN0cmluZ2lmeShkZWNvZGVkKSk7CgogICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZGVjb2RlZCkuaW5jbHVkZXMoImFkbWluIikpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiQWRtaW4iLCAieWVzIik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZG1pbiIsICJubyIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoImh0dHBzOi8vaW5mb21vdmllc2FwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvcmVzdG9yYXVudHMvIik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgX3RoaXMyLnJlc3RhdXJhbnQgPSByZXN1bHQuZGF0YTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\Karolis\\Desktop\\infomovies\\src\\components\\Companies.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<Header />\r\n    <h1>Filmus kuriančios kompanijos</h1>\r\n    <button v-if=\"isAdmin()\" v-on:click=\"createRestoraunt()\">Create</button>\r\n    <table>\r\n        <td>Pavadinimas</td>\r\n        <td>Aprašymas</td>\r\n        <tr v-for=\"item in restaurant\" :key=\"item.id\">\r\n            <td v-on:click=\"pickRestoraunt(item.id)\" >{{item.name}}</td>\r\n            <td v-on:click=\"pickRestoraunt(item.id)\" >{{item.adress}}</td>\r\n            <td v-if=\"isAdmin()\" v-on:click=\"updateRestoraunt(item.id)\">Update</td>\r\n            <td v-if=\"isAdmin()\" v-on:click=\"deleteRestoraunt(item.id)\">Delete</td>\r\n        </tr>   \r\n    </table>\r\n</template>\r\n<script>\r\n\r\nimport axios from 'axios'\r\nimport jwt_decode from \"jwt-decode\"\r\nimport Header from './Header.vue'\r\nexport default{\r\n    name:'Companies',\r\n    data(){\r\n        return {\r\n            name:'',\r\n            restaurant:[],\r\n            accessToken :''\r\n        }\r\n    },\r\n    tokenData(){\r\n        return{\r\n            role:'',\r\n        }\r\n    },\r\n    components:{\r\n        Header\r\n    },\r\n    methods:{\r\n        createRestoraunt(){\r\n            this.$router.push({name: 'AddRestoraunt'});\r\n        },\r\n        updateRestoraunt(id){\r\n            localStorage.setItem(\"pickedRestorant\", id);\r\n            this.$router.push({name: 'UpdateRestoraunt'});\r\n        },\r\n        async deleteRestoraunt(id){\r\n            let tokenJSON=localStorage.getItem(\"user-with-jwt-token\");\r\n            let token= JSON.parse(tokenJSON).accessToken;\r\n            await axios.delete(\"https://infomoviesapi.azurewebsites.net/api/restoraunts/\"+id, { headers: {\"Authorization\" : `Bearer ${token}`} });\r\n            location.reload();\r\n        },\r\n        async pickRestoraunt(id){\r\n            if (localStorage.getItem(\"user-with-jwt-token\")){\r\n                let tokenJSON=localStorage.getItem(\"user-with-jwt-token\");\r\n                let token= JSON.parse(tokenJSON).accessToken;\r\n                let result =await axios.get(\"https://infomoviesapi.azurewebsites.net/api/restoraunts/\"+id, { headers: {\"Authorization\" : `Bearer ${token}`} });\r\n                localStorage.setItem(\"pickedRestorant\", JSON.stringify(result.data));\r\n                this.$router.push({name:'Restoraunt'});\r\n            } \r\n        },\r\n        isAdmin(){\r\n            if (localStorage.getItem(\"user-with-jwt-token\") == null){\r\n                return false;\r\n            }\r\n            let tokenJSON=localStorage.getItem(\"user-with-jwt-token\");\r\n            let token= JSON.parse(tokenJSON).accessToken;\r\n            var decoded = jwt_decode(token);\r\n            localStorage.setItem(\"Decoded\", JSON.stringify(decoded));\r\n            if(JSON.stringify(decoded).includes(\"admin\")){\r\n                localStorage.setItem(\"Admin\", \"yes\");\r\n                return true;\r\n            }\r\n            localStorage.setItem(\"Admin\", \"no\");\r\n            return false;\r\n        }\r\n    },\r\n\r\n    async mounted(){\r\n        let result =await axios.get(\"https://infomoviesapi.azurewebsites.net/api/restoraunts/\");\r\n        this.restaurant=result.data;\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\ntable {\r\n  border-collapse: collapse;\r\n  width: 100%;\r\n}\r\n\r\nth, td {\r\n  padding: 8px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #DDD;\r\n  border-color: #96D4D4;\r\n  border: 1px solid black;\r\n}\r\n\r\ntr:hover {background-color: #D6EEEE;}\r\n</style>\r\n\r\n"],"sourceRoot":""}]}